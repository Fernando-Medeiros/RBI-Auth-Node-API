{
  "openapi": "3.0.1",
  "info": {
    "title": "Red-Boar-Inn API",
    "description": "Game API documentation",
    "version": "1.0.0",
    "contact": { "name": "support", "email": "red-boar-inn-support@gmail.com" }
  },
  "basePath": "/",
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "oAuth2AuthCode": {
        "type": "oauth2",
        "description": "",
        "flows": {
          "password": {
            "tokenUrl": "http://localhost:8080/token",
            "scopes": {}
          }
        }
      }
    },
    "schemas": {
      "BadRequest": {
        "type": "object",
        "properties": { "message": { "type": "string" } }
      },
      "NotFound": {
        "type": "object",
        "properties": { "message": { "type": "string" } }
      },
      "Unauthorized": {
        "type": "object",
        "properties": { "message": { "type": "string" } }
      },
      "RequestAccess": {
        "type": "object",
        "properties": {
          "email": { "type": "string", "required": true },
          "password": { "type": "string", "required": true }
        }
      },
      "RequestRefresh": {
        "type": "object",
        "properties": { "token": { "type": "string", "required": true } }
      },
      "RequestCreated": {
        "type": "object",
        "properties": {
          "firstName": { "type": "string", "required": true },
          "lastName": { "type": "string", "required": true },
          "email": { "type": "string", "required": true },
          "password": { "type": "string", "required": true }
        }
      },
      "RequestUpdate": {
        "type": "object",
        "properties": {
          "firstName": { "type": "string", "required": true },
          "lastName": { "type": "string", "required": true },
          "email": { "type": "string", "required": true }
        }
      },
      "ParameterID": {
        "name": "id",
        "in": "path",
        "type": "string",
        "required": true
      },
      "ResponseAccess": {
        "type": "object",
        "properties": {
          "access": { "type": "string" },
          "refresh": { "type": "string" },
          "type": { "type": "string" }
        }
      },
      "ResponseRefresh": {
        "type": "object",
        "properties": {
          "refresh": { "type": "string" },
          "type": { "type": "string" }
        }
      },
      "ResponseGetAll": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "id": { "type": "string" },
            "firstName": { "type": "string" },
            "lastName": { "type": "string" },
            "email": { "type": "string" }
          }
        }
      },
      "ResponseGetById": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "firstName": { "type": "string" },
          "lastName": { "type": "string" },
          "email": { "type": "string" }
        }
      }
    }
  },
  "paths": {
    "/token": {
      "post": {
        "tags": ["auth"],
        "summary": "Login with access token",
        "description": "",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RequestAccess" }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ResponseAccess" }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NotFound" }
              }
            }
          }
        }
      }
    },
    "/refresh": {
      "post": {
        "tags": ["auth"],
        "summary": "Refresh token",
        "description": "Stay authenticated by refresh token",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RequestRefresh" }
            }
          }
        },
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ResponseRefresh" }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NotFound" }
              }
            }
          }
        }
      }
    },
    "/customers": {
      "post": {
        "tags": ["customer"],
        "summary": "Register new customer",
        "security": [],
        "description": "",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RequestCreated" }
            }
          }
        },
        "parameters": [],
        "responses": {
          "201": { "description": "Successful Response" },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["customer"],
        "summary": "Get all customers",
        "security": [{ "bearerAuth": [] }, { "oAuth2AuthCode": [] }],
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ResponseGetAll" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Unauthorized" }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["customer"],
        "summary": "Update account details",
        "security": [{ "bearerAuth": [] }, { "oAuth2AuthCode": [] }],
        "description": "",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RequestUpdate" }
            }
          }
        },
        "parameters": [],
        "responses": {
          "204": { "description": "No content" },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Unauthorized" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["customer"],
        "summary": "Delete own account",
        "security": [{ "bearerAuth": [] }, { "oAuth2AuthCode": [] }],
        "description": "",
        "parameters": [],
        "responses": {
          "204": { "description": "No content" },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Unauthorized" }
              }
            }
          }
        }
      }
    },
    "/customers/{id}": {
      "get": {
        "tags": ["customer"],
        "summary": "Find a customer by id",
        "security": [{ "bearerAuth": [] }, { "oAuth2AuthCode": [] }],
        "description": "",
        "parameters": [{ "$ref": "#/components/schemas/ParameterID" }],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ResponseGetById" }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BadRequest" }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Unauthorized" }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/NotFound" }
              }
            }
          }
        }
      }
    }
  }
}
